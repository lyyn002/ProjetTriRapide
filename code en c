#include <stdio.h>
#include <stdbool.h>

#define MAX_SIZE 100


//AP pour le tri rapide
void tri_rapide (int arr[] , int deb , int fin ){
       if (deb<fin){
     int i, j;
     int pivot = arr[fin];
     int piv;
     int tmp;
     i=deb-1;

     for (j = deb ;j< fin ;j++ ){
         if (arr[j]<= pivot ){
             i++;
             tmp= arr[i];
             arr[i]=arr[j];
             arr[j]=tmp;
         }
     }

      tmp = arr[i+1];
      arr[i+1]= arr[fin];
      arr[fin] = tmp;
      piv= i+1;
      tri_rapide(arr,deb,piv-1);
      tri_rapide (arr,piv+1,fin);
     }
   }
//AP pour inserer un élément dans le tableau trié
void insertElement(int arr[], int *size, int element) {
    if (*size < MAX_SIZE) {
        int i = size - 1;

        while (i >= 0 && arr[i] > element) {
            arr[i + 1] = arr[i];
            i--;
        }

        arr[i + 1] = element;
        (*size)++;
    } else {
        printf("Le tableau est plein. Impossible d'ajouter un nouvel élément.\n");
    }
}

//AP pour supprimer un élément dans le tableau trié
void deleteElement(int arr[],int n,int element){
    int i,j;
    //recherche de l'élement à supprimer dans le tableau trié
    for (i=0;i<n;i++){
        if(arr[i]==element){
            //decalage vers la gauche
            for (j=i;j<n-1;j++){
                arr[j]=arr[j+1];
            }
            n--;//decrementer le taille
        }
            break;
  }
}
//AP pour afficher les éléments du tableau
void afficher_tab(int arr[], int *size) {
    int i;
    printf("les valeurs du tableau sont :\n");

    for (i = 0; i < *size; i++) {
        printf("arr[%d]= %d\n", i+1, arr[i]);
    }
}


//la partie main

int main(){

int arr[MAX_SIZE];
int n;

do{
    printf("Donnez la taille initiale de votre tableau : ");
    scanf("%d", &n);
} while ((n<0)||(n>100));


    // Remplir le tableau
    printf("Donnez les éléments du tableau trié :\n");
    for (int i = 0; i < n; i++) {
        printf("arr[%d] : ", i+1);
        scanf("%d", &arr[i]);
    }

    //Tri du tableau
    int deb=0;
    tri_rapide ( arr ,deb , n);

    //Affichage du tableau apres le tri
    printf("Tableau trié :\n");
    afficher_tab(arr, n);

   //menu des choix
char choix;
int valeur;

    do {
        printf("\n");
        printf("Choisissez une option :\n");
        printf("1. Insérer un élément\n");
        printf("2. Supprimer un élément\n");
        printf("0. Quitter\n");
        printf("Votre choix : ");
        scanf(" %c", &choix);

        switch (choix) {
            case '1':
                printf("Donnez l'élément à insérer : ");
                scanf("%d", &valeur);
                // ajouter la fonction et l'affichage
                 insertElement( arr,  n,  valeur);
              afficher_tab(arr,n);
               break;
        case '2':
                printf("Donnez l'élément à supprimer : ");
                scanf("%d", &valeur);
                // ajouter la fonction et l'affichage
                deleteElement(arr,n,valeur);
                afficher_tab(arr,n);
                break;

            case '0':
                break;

            default:
                printf("Option invalide. Veuillez choisir à nouveau.\n");
        }
    } while (choix != '0');
 return 0;
}
  
    






